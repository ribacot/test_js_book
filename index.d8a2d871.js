!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=e.parcelRequired7c6;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},e.parcelRequired7c6=o),o("iE7OH").register(JSON.parse('{"EVgbq":"index.d8a2d871.js","aaLHb":"amazon.40ba9165.png","cL3Jl":"book.89e7d427.png","jr1cR":"book-block.1363ec1c.png","hcYG2":"index.53513e43.js"}')),o("i8Q71"),o("32ZrB");var r=o("bpxeT"),i=o("2TvXO"),c=(r=o("bpxeT"),i=o("2TvXO"),o("dIxxU")),s=o("h6c0i"),l=document.querySelector(".container-books");function d(){return u.apply(this,arguments)}function u(){return(u=t(r)(t(i).mark((function e(){var n;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.default.get("https://books-backend.p.goit.global/books/top-books ");case 3:n=t.sent,l.insertAdjacentHTML("beforeend",p(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s.Notify.warning("Sorry, failed to load information");case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(t){var e="";return t.forEach((function(t){var n=t.list_name,a=t.books.map((function(t){var e=t.book_image,n=t.author,a=t.title,o=t._id;return'<li class="bs-list-item" hidden>\n        <div class="book-card" data-id="'.concat(o,'">\n        <div class="image-overlay" data-id="').concat(o,'">\n            <img class="book-img js-ct" src="').concat(e,'" alt="').concat(a,'" loading="lazy" />\n            <div class="image-description" data-id="').concat(o,'">\n      <p class="image-overlay-description js-ct">quick view</p>\n     </div>\n      </div>\n            <h3 class="book-title js-ct">').concat(a,'</h3>\n            <h4 class="book-author js-ct">').concat(n,"</h4>\n        </div>\n        </li>")})).join("");e+='<div class="category-block">\n        <h2 class="cat-title">'.concat(t.list_name,'</h2>\n        <ul class="book-list">').concat(a,'</ul>\n        <button type="button" class="btn-more" data-catname="').concat(n,'">SEE MORE</button>\n    </div>')})),e='<h1 class="main-title">Best Sellers <span>Books</span></h1>'+e}l.firstChild||d();s=o("h6c0i");var v=document.querySelector(".category-list"),f=(c=o("dIxxU")).default;function g(){return(g=t(r)(t(i).mark((function e(){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.get("https://books-backend.p.goit.global/books/category-list");case 3:m(t.sent.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),s.Notify.warning("Sorry, failed to load information");case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(t){var e=t.map((function(t){var e=t.list_name;return'<li class = "category-list-item"> '.concat(e," </li>")})).join("");e='<li class = "category-list-item"> All Categories </li>'+e,v.innerHTML=e}function b(t){return k.apply(this,arguments)}function k(){return(k=t(r)(t(i).mark((function e(n){return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get("https://books-backend.p.goit.global/books/category?category=".concat(n)).then((function(t){return h(t.data)}));case 2:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function h(t){var e='\n    <h2 class ="main-title">'.concat(t[0].list_name,'</h2>\n    <ul class="book-list">').concat(t.map((function(t){var e=t.author,n=t.book_image,a=t.title,o=t._id;return'<li class="bs-list-item">\n          <div class="book-card " data-id="'.concat(o,'">\n    <div class="image-overlay" data-id="').concat(o,'">\n    <img class="book-img js-ct" src="').concat(n,'" alt="').concat(a,' loading="lazy" >\n    <div class="image-description" data-id="').concat(o,'">\n      <p class="image-overlay-description js-ct"> quick view  </p>\n     </div>\n      </div>\n    <h3 class="book-title js-ct">').concat(a,'</h3>\n    <p class="book-author js-ct"> ').concat(e,"</p>\n    </div>\n    </li>")})).join(""),"\n    </ul>\n     ");l.innerHTML=e;var n=document.querySelector(".main-title"),a=n.textContent,o=a.split(" "),r=o[o.length-1];n.innerHTML=a.replace(r,'<span class="brendcolor">'.concat(r,"</span>"))}document.querySelector(".container-books").addEventListener("click",(function(t){var e=t.target.dataset.catname,n=Array.from(v.querySelectorAll("li")),a=n.find((function(t){return t.innerText===e})),o=n.find((function(t){return"all categories"===t.innerText.toLowerCase()}));a&&(o.classList.remove("categories__title-active"),a.classList.add("categories__title-active"));return})),v.addEventListener("click",(function(t){var e=t.target,n=document.querySelector(".categories__title-active");if("LI"!==e.tagName)return;n&&n.classList.remove("categories__title-active");if(t.target.classList.add("categories__title-active"),"All Categories"===e.textContent.trim())return l.innerHTML="",d();b(e.textContent.trim())})),function(){g.apply(this,arguments)}(),o("xpKCW");var y;r=o("bpxeT"),i=o("2TvXO");y=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("aaLHb");var _;_=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("cL3Jl");var L;L=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("jr1cR");s=o("h6c0i");var S,x=document.querySelector(".backdrop"),E=document.querySelector(".modal"),w=document.querySelector(".modal-shopping-close"),H=document.querySelector(".render-modal"),T=document.querySelector(".scroll-btn");function q(){x.classList.remove("active"),E.classList.remove("active"),T.classList.remove("visually-hidden"),document.body.style.overflow="auto"}function N(t){return j.apply(this,arguments)}function j(){return(j=t(r)(t(i).mark((function e(n){var a,o,r;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="https://books-backend.p.goit.global/books/".concat(n),t.next=4,fetch(a);case 4:if((o=t.sent).ok){t.next=7;break}throw new Error("Error: ".concat(o.status," ").concat(o.statusText));case 7:return t.next=9,o.json();case 9:return r=t.sent,t.abrupt("return",[r]);case 13:t.prev=13,t.t0=t.catch(0),s.Notify.warning("Sorry, failed to load information");case 16:case"end":return t.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function O(e){var n=e.map((function(e){return'\n        <div class="card-modal" id="'.concat(e._id,'">\n        <img\n          class="modal-img"\n          alt="').concat(e.title,'"\n          src="').concat(e.book_image,'"\n        />\n  \n        <div class="thumb-modal">\n          <h2 class="book-title-in-modal">').concat(e.title,'</h2>\n          <p class="subtitle-book">').concat(e.author,'</p>\n          <p class="text book">\n          ').concat(e.description?e.description:"Sorry, but this book does not have an accessible description. Try reading it on the website of one of the shops",'\n          </p>\n          <ul class="shop-list">\n            <li>\n              <a href="').concat(e.buy_links[0].url,'" target="_blank">\n                <img src="').concat(t(y),'" alt="Amazon" class="darkFilterModal"/>\n              </a>\n            </li>\n            <li>\n              <a href="').concat(e.buy_links[1].url,'" target="_blank">\n                <img src="').concat(t(_),'" alt="Apple Books" />\n              </a>\n            </li>\n            <li>\n              <a href="').concat(e.buy_links[4].url,'" target="_blank">\n                <img src="').concat(t(L),'" alt="Bookshop" />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n        ')})).join("");H.insertAdjacentHTML("beforeend",n)}var A=function(){var t=document.querySelector(".darkFilterModal");"dark"===localStorage.getItem("theme")?t.classList.add("filter-img"):t.classList.remove("filter-img")};function B(){return(B=t(r)(t(i).mark((function e(n){var a;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,T.classList.add("visually-hidden"),H.innerHTML="",t.next=5,N(n);case 5:a=t.sent,S=a[0]._id,O(a),A(),C(S),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),s.Notify.warning("Sorry, failed to load information");case 15:case"end":return t.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function R(){return(R=t(r)(t(i).mark((function e(n){var a,o,r,c,l,d,u,p,v,f,g;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N(n);case 3:a=t.sent,o=a[0],r=o._id,c=o.book_image,l=o.title,d=o.list_name,u=o.description,p=o.author,v=o.buy_links,f={_id:r,book_image:c,title:l,list_name:d,description:u,author:p,buy_links:v},(g=JSON.parse(localStorage.getItem("savedBooks"))||[]).push(f),localStorage.setItem("savedBooks",JSON.stringify(g)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),s.Notify.warning("Sorry, failed to load information");case 14:case"end":return t.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function C(t){if(JSON.parse(localStorage.getItem("savedBooks")).some((function(e){return e._id===t}))){H.insertAdjacentHTML("beforeend",'\n      <button type="submit" class="button book" aria-label="Remove from shopping">\n        Remove from the shopping list\n      </button>\n      <p class="congratulation">\n        Сongratulations! You have added the book to the shopping list. To delete,\n        press the button “Remove from the shopping list”.\n      </p>\n    ');var e=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(e.disabled=!0,e.textContent="Login please"),e.addEventListener("click",I)}else{H.insertAdjacentHTML("beforeend",'\n      <button type="submit" class="button book" aria-label="Add to shopping">\n        Add to shopping list\n      </button>\n    ');var n=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(n.disabled=!0,n.textContent="Login please"),n.addEventListener("click",J)}}function J(t){!function(t){R.apply(this,arguments)}(S),q(),M()}function I(t){var e,n,a;e=S,n=JSON.parse(localStorage.getItem("savedBooks")),-1!==(a=n.findIndex((function(t){return t._id===e})))&&n.splice(a,1),localStorage.setItem("savedBooks",JSON.stringify(n)),q(),M()}function M(){var t=document.querySelector(".button.book");t.removeEventListener("click",I),t.removeEventListener("click",J)}function F(t){t.target===x&&(q(),z())}function U(t){q(),z()}function V(t){"Escape"===t.key&&(q(),z())}function z(){x.removeEventListener("click",F),document.removeEventListener("keydown",V),w.removeEventListener("click",U)}function X(t){var e;"BUTTON"===t.target.tagName&&b(t.target.dataset.catname),t.target.classList.value.includes("js-ct")&&(e=t.target.parentElement.dataset.id),e&&(!function(t){B.apply(this,arguments)}(e),x.classList.add("active"),E.classList.add("active"),document.body.style.overflow="hidden",x.addEventListener("click",F),document.addEventListener("keydown",V),w.addEventListener("click",U))}JSON.parse(localStorage.getItem("savedBooks"))||localStorage.setItem("savedBooks",JSON.stringify([])),window.addEventListener("load",(function(){l.addEventListener("click",X)})),o("kvC6y"),o("8VrgS")}();
//# sourceMappingURL=index.d8a2d871.js.map
