function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in o)return o[t].exports;if(t in n){var e=n[t];delete n[t];var a={id:t,exports:{}};return o[t]=a,e.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},e.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.a93f99b3.js","1yVwl":"amazon.40ba9165.png","fIBw5":"book.89e7d427.png","fSsri":"book-block.1363ec1c.png","fwWPP":"index.e528f7ad.js"}')),a("bUb57"),a("ghT7p");var i=a("2shzp"),s=a("iQIUW");const l=document.querySelector(".container-books");async function r(){try{const t=await i.default.get("https://books-backend.p.goit.global/books/top-books ");l.insertAdjacentHTML("beforeend",function(t){let e="";return t.forEach((t=>{let o=t.list_name,n=t.books.map((({book_image:t,author:e,title:o,_id:n})=>`<li class="bs-list-item" hidden>\n        <div class="book-card" data-id="${n}">\n        <div class="image-overlay" data-id="${n}">\n            <img class="book-img js-ct" src="${t}" alt="${o}" loading="lazy" />\n            <div class="image-description" data-id="${n}">\n      <p class="image-overlay-description js-ct">quick view</p>\n     </div>\n      </div>\n            <h3 class="book-title js-ct">${o}</h3>\n            <h4 class="book-author js-ct">${e}</h4>\n        </div>\n        </li>`)).join("");e+=`<div class="category-block">\n        <h2 class="cat-title">${t.list_name}</h2>\n        <ul class="book-list">${n}</ul>\n        <button type="button" class="btn-more" data-catname="${o}">SEE MORE</button>\n    </div>`})),e='<h1 class="main-title">Best Sellers <span>Books</span></h1>'+e,e}(t.data))}catch(t){s.Notify.warning("Sorry, failed to load information")}}l.firstChild||r();s=a("iQIUW");const c=document.querySelector(".category-list");var d=(i=a("2shzp")).default;async function u(t){await d.get(`https://books-backend.p.goit.global/books/category?category=${t}`).then((({data:t})=>function(t){const e=`\n    <h2 class ="main-title">${t[0].list_name}</h2>\n    <ul class="book-list">${t.map((({author:t,book_image:e,title:o,_id:n})=>`<li class="bs-list-item">\n          <div class="book-card " data-id="${n}">\n    <div class="image-overlay" data-id="${n}">\n    <img class="book-img js-ct" src="${e}" alt="${o} loading="lazy" >\n    <div class="image-description" data-id="${n}">\n      <p class="image-overlay-description js-ct"> quick view  </p>\n     </div>\n      </div>\n    <h3 class="book-title js-ct">${o}</h3>\n    <p class="book-author js-ct"> ${t}</p>\n    </div>\n    </li>`)).join("")}\n    </ul>\n     `;l.innerHTML=e;const o=document.querySelector(".main-title"),n=o.textContent,a=n.split(" "),i=a[a.length-1];o.innerHTML=n.replace(i,`<span class="brendcolor">${i}</span>`)}(t)))}document.querySelector(".container-books").addEventListener("click",(function(t){let e=t.target.dataset.catname;const o=Array.from(c.querySelectorAll("li")),n=o.find((t=>t.innerText===e)),a=o.find((t=>"all categories"===t.innerText.toLowerCase()));n&&(a.classList.remove("categories__title-active"),n.classList.add("categories__title-active"));return})),c.addEventListener("click",(function(t){const e=t.target,o=document.querySelector(".categories__title-active");if("LI"!==e.tagName)return;o&&o.classList.remove("categories__title-active");if(t.target.classList.add("categories__title-active"),"All Categories"===e.textContent.trim())return l.innerHTML="",r();u(e.textContent.trim())})),async function(){try{!function(t){let e=t.map((({list_name:t})=>`<li class = "category-list-item"> ${t} </li>`)).join("");e='<li class = "category-list-item"> All Categories </li>'+e,c.innerHTML=e}((await d.get("https://books-backend.p.goit.global/books/category-list")).data)}catch(t){s.Notify.warning("Sorry, failed to load information")}}(),a("dTazW");var m;m=new URL(a("kyEFX").resolve("1yVwl"),import.meta.url).toString();var g;g=new URL(a("kyEFX").resolve("fIBw5"),import.meta.url).toString();var b;b=new URL(a("kyEFX").resolve("fSsri"),import.meta.url).toString();s=a("iQIUW");const f=document.querySelector(".backdrop"),p=document.querySelector(".modal"),k=document.querySelector(".modal-shopping-close"),v=document.querySelector(".render-modal"),y=document.querySelector(".scroll-btn");let h;function S(){f.classList.remove("active"),p.classList.remove("active"),y.classList.remove("visually-hidden"),document.body.style.overflow="auto"}async function _(t){try{const e=`https://books-backend.p.goit.global/books/${t}`,o=await fetch(e);if(!o.ok)throw new Error(`Error: ${o.status} ${o.statusText}`);return[await o.json()]}catch(t){s.Notify.warning("Sorry, failed to load information")}}async function L(e){try{y.classList.add("visually-hidden"),v.innerHTML="";const o=await _(e);h=o[0]._id,function(e){const o=e.map((e=>`\n        <div class="card-modal" id="${e._id}">\n        <img\n          class="modal-img"\n          alt="${e.title}"\n          src="${e.book_image}"\n        />\n  \n        <div class="thumb-modal">\n          <h2 class="book-title-in-modal">${e.title}</h2>\n          <p class="subtitle-book">${e.author}</p>\n          <p class="text book">\n          ${e.description?e.description:"Sorry, but this book does not have an accessible description. Try reading it on the website of one of the shops"}\n          </p>\n          <ul class="shop-list">\n            <li>\n              <a href="${e.buy_links[0].url}" target="_blank">\n                <img src="${t(m)}" alt="Amazon" class="darkFilterModal"/>\n              </a>\n            </li>\n            <li>\n              <a href="${e.buy_links[1].url}" target="_blank">\n                <img src="${t(g)}" alt="Apple Books" />\n              </a>\n            </li>\n            <li>\n              <a href="${e.buy_links[4].url}" target="_blank">\n                <img src="${t(b)}" alt="Bookshop" />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n        `)).join("");v.insertAdjacentHTML("beforeend",o)}(o),(()=>{const t=document.querySelector(".darkFilterModal");"dark"===localStorage.getItem("theme")?t.classList.add("filter-img"):t.classList.remove("filter-img")})(),function(t){if(JSON.parse(localStorage.getItem("savedBooks")).some((e=>e._id===t))){const t='\n      <button type="submit" class="button book" aria-label="Remove from shopping">\n        Remove from the shopping list\n      </button>\n      <p class="congratulation">\n        Сongratulations! You have added the book to the shopping list. To delete,\n        press the button “Remove from the shopping list”.\n      </p>\n    ';v.insertAdjacentHTML("beforeend",t);const e=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(e.disabled=!0,e.textContent="Login please"),e.addEventListener("click",$)}else{const t='\n      <button type="submit" class="button book" aria-label="Add to shopping">\n        Add to shopping list\n      </button>\n    ';v.insertAdjacentHTML("beforeend",t);const e=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(e.disabled=!0,e.textContent="Login please"),e.addEventListener("click",w)}}(h)}catch(t){s.Notify.warning("Sorry, failed to load information")}}function w(t){!async function(t){try{const e=await _(t),{_id:o,book_image:n,title:a,list_name:i,description:s,author:l,buy_links:r}=e[0],c={_id:o,book_image:n,title:a,list_name:i,description:s,author:l,buy_links:r},d=JSON.parse(localStorage.getItem("savedBooks"))||[];d.push(c),localStorage.setItem("savedBooks",JSON.stringify(d))}catch(t){s.Notify.warning("Sorry, failed to load information")}}(h),S(),E()}function $(t){!function(t){const e=JSON.parse(localStorage.getItem("savedBooks")),o=e.findIndex((e=>e._id===t));-1!==o&&e.splice(o,1),localStorage.setItem("savedBooks",JSON.stringify(e))}(h),S(),E()}function E(){const t=document.querySelector(".button.book");t.removeEventListener("click",$),t.removeEventListener("click",w)}function j(t){t.target===f&&(S(),q())}function T(t){S(),q()}function N(t){"Escape"===t.key&&(S(),q())}function q(){f.removeEventListener("click",j),document.removeEventListener("keydown",N),k.removeEventListener("click",T)}function H(t){let e;"BUTTON"===t.target.tagName&&u(t.target.dataset.catname),t.target.classList.value.includes("js-ct")&&(e=t.target.parentElement.dataset.id),e&&(L(e),f.classList.add("active"),p.classList.add("active"),document.body.style.overflow="hidden",f.addEventListener("click",j),document.addEventListener("keydown",N),k.addEventListener("click",T))}JSON.parse(localStorage.getItem("savedBooks"))||localStorage.setItem("savedBooks",JSON.stringify([])),window.addEventListener("load",(function(){l.addEventListener("click",H)})),a("gjiCh"),a("h8wPa");
//# sourceMappingURL=index.a93f99b3.js.map
